!function(e){"use strict";var r=function(e,r){var t=new Error(e+" at character "+r);throw t.index=r,t.description=e,t},t={"-":!0,"!":!0,"~":!0,"+":!0},n={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},o=function(e){var r,t=0;for(var n in e)(r=n.length)>t&&e.hasOwnProperty(n)&&(t=r);return t},i=o(t),a=o(n),u={true:!0,false:!1,null:null},s=function(e){return n[e]||0},p=function(e,r,t){return{type:"||"===e||"&&"===e?"LogicalExpression":"BinaryExpression",operator:e,left:r,right:t}},f=function(e){return e>=48&&e<=57},c=function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=128&&!n[String.fromCharCode(e)]},l=function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e>=128&&!n[String.fromCharCode(e)]},h=function(e){for(var o,h,d=0,v=e.charAt,x=e.charCodeAt,y=function(r){return v.call(e,r)},g=function(r){return x.call(e,r)},m=e.length,b=function(){for(var e=g(d);32===e||9===e||10===e||13===e;)e=g(++d)},E=function(){var e,t,n=U();return b(),63!==g(d)?n:(d++,(e=E())||r("Expected expression",d),b(),58===g(d)?(d++,(t=E())||r("Expected expression",d),{type:"ConditionalExpression",test:n,consequent:e,alternate:t}):void r("Expected :",d))},C=function(){b();for(var r=e.substr(d,a),t=r.length;t>0;){if(n.hasOwnProperty(r)&&(!c(g(d))||d+r.length<e.length&&!l(g(d+r.length))))return d+=t,r;r=r.substr(0,--t)}return!1},U=function(){var e,t,n,o,i,a,u,f,c;if(a=w(),!(t=C()))return a;for(i={value:t,prec:s(t)},(u=w())||r("Expected expression after "+t,d),o=[a,i,u];(t=C())&&0!==(n=s(t));){for(i={value:t,prec:n},c=t;o.length>2&&n<=o[o.length-2].prec;)u=o.pop(),t=o.pop().value,a=o.pop(),e=p(t,a,u),o.push(e);(e=w())||r("Expected expression after "+c,d),o.push(i,e)}for(e=o[f=o.length-1];f>1;)e=p(o[f-1].value,o[f-2],e),f-=2;return e},w=function(){var r,n,o;if(b(),r=g(d),f(r)||46===r)return k();if(39===r||34===r)return O();if(91===r)return P();for(o=(n=e.substr(d,i)).length;o>0;){if(t.hasOwnProperty(n)&&(!c(g(d))||d+n.length<e.length&&!l(g(d+n.length))))return d+=o,{type:"UnaryExpression",operator:n,argument:w(),prefix:!0};n=n.substr(0,--o)}return!(!c(r)&&40!==r)&&j()},k=function(){for(var e,t,n="";f(g(d));)n+=y(d++);if(46===g(d))for(n+=y(d++);f(g(d));)n+=y(d++);if("e"===(e=y(d))||"E"===e){for(n+=y(d++),"+"!==(e=y(d))&&"-"!==e||(n+=y(d++));f(g(d));)n+=y(d++);f(g(d-1))||r("Expected exponent ("+n+y(d)+")",d)}return t=g(d),c(t)?r("Variable names cannot start with a number ("+n+y(d)+")",d):46===t&&r("Unexpected period",d),{type:"Literal",value:parseFloat(n),raw:n}},O=function(){for(var e,t="",n=y(d++),o=!1;d<m;){if((e=y(d++))===n){o=!0;break}if("\\"===e)switch(e=y(d++)){case"n":t+="\n";break;case"r":t+="\r";break;case"t":t+="\t";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:t+=e}else t+=e}return o||r('Unclosed quote after "'+t+'"',d),{type:"Literal",value:t,raw:n+t+n}},L=function(){var t,n=g(d),o=d;for(c(n)?d++:r("Unexpected "+y(d),d);d<m&&(n=g(d),l(n));)d++;return t=e.slice(o,d),u.hasOwnProperty(t)?{type:"Literal",value:u[t],raw:t}:"this"===t?{type:"ThisExpression"}:{type:"Identifier",name:t}},S=function(e){for(var t,n,o=[],i=!1,a=0;d<m;){if(b(),(t=g(d))===e){i=!0,d++,41===e&&a&&a>=o.length&&r("Unexpected token "+String.fromCharCode(e),d);break}if(44===t){if(d++,++a!==o.length)if(41===e)r("Unexpected token ,",d);else if(93===e)for(var u=o.length;u<a;u++)o.push(null)}else(n=E())&&"Compound"!==n.type||r("Expected comma",d),o.push(n)}return i||r("Expected "+String.fromCharCode(e),d),o},j=function(){var e,t;for(t=40===(e=g(d))?A():L(),b(),e=g(d);46===e||91===e||40===e;)d++,46===e?(b(),t={type:"MemberExpression",computed:!1,object:t,property:L()}):91===e?(t={type:"MemberExpression",computed:!0,object:t,property:E()},b(),93!==(e=g(d))&&r("Unclosed [",d),d++):40===e&&(t={type:"CallExpression",arguments:S(41),callee:t}),b(),e=g(d);return t},A=function(){d++;var e=E();if(b(),41===g(d))return d++,e;r("Unclosed (",d)},P=function(){return d++,{type:"ArrayExpression",elements:S(93)}},B=[];d<m;)59===(o=g(d))||44===o?d++:(h=E())?B.push(h):d<m&&r('Unexpected "'+y(d)+'"',d);return 1===B.length?B[0]:{type:"Compound",body:B}};if(h.version="<%= version %>",h.toString=function(){return"JavaScript Expression Parser (JSEP) v"+h.version},h.addUnaryOp=function(e){return i=Math.max(e.length,i),t[e]=!0,this},h.addBinaryOp=function(e,r){return a=Math.max(e.length,a),n[e]=r,this},h.addLiteral=function(e,r){return u[e]=r,this},h.removeUnaryOp=function(e){return delete t[e],e.length===i&&(i=o(t)),this},h.removeAllUnaryOps=function(){return t={},i=0,this},h.removeBinaryOp=function(e){return delete n[e],e.length===a&&(a=o(n)),this},h.removeAllBinaryOps=function(){return n={},a=0,this},h.removeLiteral=function(e){return delete u[e],this},h.removeAllLiterals=function(){return u={},this},"undefined"==typeof exports){var d=e.jsep;e.jsep=h,h.noConflict=function(){return e.jsep===h&&(e.jsep=d),h}}else"undefined"!=typeof module&&module.exports?exports=module.exports=h:exports.parse=h}(this);